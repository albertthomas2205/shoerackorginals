
{% extends 'userside/core.html' %}
{% load static %}
{% block content %}


	<!-- Product Detail -->
	<section class="sec-product-detail bg0 p-t-65 p-b-60">
		<div class="container">
			<div class="row">
				<div class="col-md-6 col-lg-7 p-b-30">
					<div class="p-l-25 p-r-30 p-lr-0-lg">
						<div class="wrap-slick3 flex-sb flex-w">
							<div class="wrap-slick3-dots"></div>
							<div class="wrap-slick3-arrows flex-sb-m flex-w"></div>

							<div class="slick3 gallery-lb">
								{% for image in k %}
								<div class="item-slick3" data-thumb="{{image.image.url}}">
									<div class="wrap-pic-w pos-relative">
										<img src="{{ image.image.url }}" alt="IMG-PRODUCT">
										

										<a class="flex-c-m size-108 how-pos1 bor0 fs-16 cl10 bg0 hov-btn3 trans-04" href="{% static 'static_user/images/product-detail-01.jpg' %}">
											<i class="fa fa-expand"></i>
										</a>
									</div>
								</div>
								{% endfor %}

								<!-- <div class="item-slick3" data-thumb="{% static 'static_user/images/product-detail-02.jpg' %}">
									<div class="wrap-pic-w pos-relative">
										<img src="{% static 'static_user/images/product-detail-02.jpg' %}" alt="IMG-PRODUCT">

										<a class="flex-c-m size-108 how-pos1 bor0 fs-16 cl10 bg0 hov-btn3 trans-04" href="{% static 'static_user/images/product-detail-02.jpg' %}">
											<i class="fa fa-expand"></i>
										</a>
									</div>
								</div> -->

								<!-- <div class="item-slick3" data-thumb="images/product-detail-03.jpg">
									<div class="wrap-pic-w pos-relative">
										<img src="{% static 'static_user/images/product-detail-03.jpg' %}" alt="IMG-PRODUCT">

										<a class="flex-c-m size-108 how-pos1 bor0 fs-16 cl10 bg0 hov-btn3 trans-04" href="{% static 'static_user/images/product-detail-03.jpg' %}">
											<i class="fa fa-expand"></i>
										</a>
									</div>
								</div> -->
							</div>
						</div>
					</div>
				</div>
					
				<div class="col-md-6 col-lg-5 p-b-30">
					
					<div class="p-r-50 p-t-5 p-lr-0-lg">
						<h4 class="mtext-105 cl2 js-name-detail p-b-14">
							{{data.product.name}}
						</h4>

						<span class="mtext-106 cl2">
						$<span id="priceDisplay">{{ data.price }}</span>
						</span>
							
						<p class="stext-102 cl3 p-t-23">
						{{data.description}}
						</p>
					
						
						<p class="stext-102 cl3 p-t-23">
							color: {{data.product.color}}
						</p>
					
						<!--  -->
						<div class="p-t-33">
							<div class="flex-w flex-r-m p-b-10">
								<div class="size-203 flex-c-m respon6">
									Size
								</div>
								
								<!-- <div class="size-204 respon6-next">
									
										<select name="time" id="sizeSelect">
											
											{% for size in product.productsize.all %}
											<option>{{size.size}}</option>
											
											
											{% endfor %}
										</select>
								
								</div> -->

								<div class="size-204 respon6-next">
									<select style="display: block; width: 38%; padding: 12px; font-size: 16px; line-height: 1.5; color: #555; background-color: #fff; background-clip: padding-box; border: 1px solid #ccc; border-radius: 4px; transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;"
									name="time" id="sizeSelect">
								{% for size in psize %}
									<option value="{{ size.id }}">{{ size.size }}</option>
								{% endfor %}
							</select>
								
								</div>
							
							</div>

						

						 {% if  data.stock > 1 %}
							
							<div class="flex-w flex-r-m p-b-10">
								
								<div class="size-203 flex-c-m respon6">
									Quantity  
								</div>

								
								<div class="size-204 flex-w flex-m respon6-next">
									<div class="wrap-num-product flex-w m-r-20 m-tb-10">
										<div class="btn-num-product-down cl8 hov-btn3 trans-04 flex-c-m">
											<i class="fs-16 zmdi zmdi-minus"></i>
										</div>

										<input class="mtext-104 cl3 txt-center num-product" type="number" name="num-product" value="1">

										<div class="btn-num-product-up cl8 hov-btn3 trans-04 flex-c-m">
											<i class="fs-16 zmdi zmdi-plus"></i>
										</div>
									</div>
								                               
								<!-- <button class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04 " >
										<a  style="color:aliceblue" href="{% url 'add_to_cart' data.id %}"> 
										Add to cart
										</a>
										
									</button>  -->
									
									<button class="addToCartBtn btn btn-dark add-to-cart flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04 js-addcart-detail" data-product-id="{{ data.id }}" id="addToCartBtn">Add to Basket</button>
									
									
									
							
								</div>
							</div>	
						</div>
					
						{% else %}
						 <p style="color:#fa4251"> product out of stock </p>
						 {% endif %}
					
{% comment %} 				
						<button class="add-to-cart flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04 js-addcart-detail" data-product-id="{{product.productsize.id}}"  id="addToCart" >
										
							Add to cart
						
						</button> 
						 {% endcomment %}

						<!--  -->
						<div class="flex-w flex-m p-l-100 p-t-40 respon7">
							<div class="flex-m bor9 p-r-10 m-r-11">
								<a href="#" class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 js-addwish-detail tooltip100" data-tooltip="Add to Wishlist">
									<i class="zmdi zmdi-favorite"></i>
								</a>
							</div>

							<a href="#" class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 m-r-8 tooltip100" data-tooltip="Facebook">
								<i class="fa fa-facebook"></i>
							</a>

							<a href="#" class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 m-r-8 tooltip100" data-tooltip="Twitter">
								<i class="fa fa-twitter"></i>
							</a>

							<a href="#" class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 m-r-8 tooltip100" data-tooltip="Google Plus">
								<i class="fa fa-google-plus"></i>
							</a>
						</div>
					</div>
				</div>
			</div>
        </div>
    </section>
		<!-- Product -->
		<section class="bg0 p-t-23 p-b-140">
			<div class="container">
				<div class="p-b-10">
					
				</div>
	
				<div class="flex-w flex-sb-m p-b-52">
					<div class="flex-w flex-l-m filter-tope-group m-tb-10">
						<h3 class="font-weight-bold">
							Related Product 
						</h3>
						
					</div>
	
					<div class="flex-w flex-c-m m-tb-10">
						
					</div>
					
					<!-- Search product -->
					<div class="dis-none panel-search w-full p-t-10 p-b-15">
						
					</div>
	
					<!-- Filter -->
					<div class="dis-none panel-filter w-full p-t-10">
						<div class="wrap-filter flex-w bg6 w-full p-lr-40 p-t-27 p-lr-15-sm">
							<div class="filter-col1 p-r-15 p-b-27">
								<div class="mtext-102 cl2 p-b-15">
									Sort By
								</div>
	
								<ul>
									<li class="p-b-6">
										<a href="#" class="filter-link stext-106 trans-04">
											Default
										</a>
									</li>
	
									<li class="p-b-6">
										<a href="#" class="filter-link stext-106 trans-04">
											Popularity
										</a>
									</li>
	
									<li class="p-b-6">
										<a href="#" class="filter-link stext-106 trans-04">
											Average rating
										</a>
									</li>
	
									<li class="p-b-6">
										<a href="#" class="filter-link stext-106 trans-04 filter-link-active">
											Newness
										</a>
									</li>
	
									<li class="p-b-6">
										<a href="#" class="filter-link stext-106 trans-04">
											Price: Low to High
										</a>
									</li>
	
									<li class="p-b-6">
										<a href="#" class="filter-link stext-106 trans-04">
											Price: High to Low
										</a>
									</li>
								</ul>
							</div>
	
							<div class="filter-col2 p-r-15 p-b-27">
								<div class="mtext-102 cl2 p-b-15">
									Price
								</div>
	
								<ul>
									<li class="p-b-6">
										<a href="#" class="filter-link stext-106 trans-04 filter-link-active">
											All
										</a>
									</li>
	
									<li class="p-b-6">
										<a href="#" class="filter-link stext-106 trans-04">
											$0.00 - $50.00
										</a>
									</li>
	
									<li class="p-b-6">
										<a href="#" class="filter-link stext-106 trans-04">
											$50.00 - $100.00
										</a>
									</li>
	
									<li class="p-b-6">
										<a href="#" class="filter-link stext-106 trans-04">
											$100.00 - $150.00
										</a>
									</li>
	
									<li class="p-b-6">
										<a href="#" class="filter-link stext-106 trans-04">
											$150.00 - $200.00
										</a>
									</li>
	
									<li class="p-b-6">
										<a href="#" class="filter-link stext-106 trans-04">
											$200.00+
										</a>
									</li>
								</ul>
							</div>
	
							<div class="filter-col3 p-r-15 p-b-27">
								<div class="mtext-102 cl2 p-b-15">
									Color
								</div>
	
								<ul>
									<li class="p-b-6">
										<span class="fs-15 lh-12 m-r-6" style="color: #222;">
											<i class="zmdi zmdi-circle"></i>
										</span>
	
										<a href="#" class="filter-link stext-106 trans-04">
											Black
										</a>
									</li>
	
									<li class="p-b-6">
										<span class="fs-15 lh-12 m-r-6" style="color: #4272d7;">
											<i class="zmdi zmdi-circle"></i>
										</span>
	
										<a href="#" class="filter-link stext-106 trans-04 filter-link-active">
											Blue
										</a>
									</li>
	
									<li class="p-b-6">
										<span class="fs-15 lh-12 m-r-6" style="color: #b3b3b3;">
											<i class="zmdi zmdi-circle"></i>
										</span>
	
										<a href="#" class="filter-link stext-106 trans-04">
											Grey
										</a>
									</li>
	
									<li class="p-b-6">
										<span class="fs-15 lh-12 m-r-6" style="color: #00ad5f;">
											<i class="zmdi zmdi-circle"></i>
										</span>
	
										<a href="#" class="filter-link stext-106 trans-04">
											Green
										</a>
									</li>
	
									<li class="p-b-6">
										<span class="fs-15 lh-12 m-r-6" style="color: #fa4251;">
											<i class="zmdi zmdi-circle"></i>
										</span>
	
										<a href="#" class="filter-link stext-106 trans-04">
											Red
										</a>
									</li>
	
									<li class="p-b-6">
										<span class="fs-15 lh-12 m-r-6" style="color: #aaa;">
											<i class="zmdi zmdi-circle-o"></i>
										</span>
	
										<a href="#" class="filter-link stext-106 trans-04">
											White
										</a>
									</li>
								</ul>
							</div>
	
							<div class="filter-col4 p-b-27">
								<div class="mtext-102 cl2 p-b-15">
									Tags
								</div>
	
								<div class="flex-w p-t-4 m-r--5">
									<a href="#" class="flex-c-m stext-107 cl6 size-301 bor7 p-lr-15 hov-tag1 trans-04 m-r-5 m-b-5">
										Fashion
									</a>
	
									<a href="#" class="flex-c-m stext-107 cl6 size-301 bor7 p-lr-15 hov-tag1 trans-04 m-r-5 m-b-5">
										Lifestyle
									</a>
	
									<a href="#" class="flex-c-m stext-107 cl6 size-301 bor7 p-lr-15 hov-tag1 trans-04 m-r-5 m-b-5">
										Denim
									</a>
	
									<a href="#" class="flex-c-m stext-107 cl6 size-301 bor7 p-lr-15 hov-tag1 trans-04 m-r-5 m-b-5">
										Streetstyle
									</a>
	
									<a href="#" class="flex-c-m stext-107 cl6 size-301 bor7 p-lr-15 hov-tag1 trans-04 m-r-5 m-b-5">
										Crafts
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
	
	
	
			
	
	
				<div class="row isotope-grid">
					
					{% for p in products  %}
					<a href="{% url 'singproduct' p.productsize.first.id%}">
					<div class="col-sm-6 col-md-4 col-lg-3 p-b-35 isotope-item women">
						<!-- Block2 -->
						<div class="block2"> 
							<div class="block2-pic hov-img0">
								<img src="{{ p.images.first.image.url}}" alt="IMG-PRODUCT">
	
								{% comment %} <a href="#" class="block2-btn flex-c-m stext-103 cl2 size-102 bg0 bor2 hov-btn1 p-lr-15 trans-04 js-show-modal1">
									Quick View
								</a> {% endcomment %}
							</div>
	
							<div class="block2-txt flex-w flex-t p-t-14">
								<div class="block2-txt-child1 flex-col-l ">
									<h5>{{p.name}}</h5>
							
								
									<span class="stext-105 cl3">
										${{p.productsize.first.price}}
									</span>
									<span class="stext-105 cl3">
										 {{p.subcategory.name}}
									</span>
									<span class="stext-105 cl3">
										color:{{p.color}}
									</span>
								
	
	
				
								</div>
	
								<div class="block2-txt-child2 flex-r p-t-3">
									<a href="#" class="btn-addwish-b2 dis-block pos-relative js-addwish-b2">
										<img class="icon-heart1 dis-block trans-04" src="{% static 'static_user/images/icons/icon-heart-01.png' %}" alt="ICON">
										<img class="icon-heart2 dis-block trans-04 ab-t-l" src="{% static 'static_user/images/icons/icon-heart-02.png' %}" alt="ICON">
									</a>
								</div>
							</div>
						</div>
					</div>
				</a>
					{% endfor %}
			
				</div>
								
				
			<div>
				<!-- Load more -->
				
			</div>
		</section>

	


        

{% endblock  %}

{% block sample  %}
 

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- <script>
	document.getElementById("sizeSelect").addEventListener("change", function() {
		var selectedValue = this.value;  // Get the selected size.id
		if (selectedValue) {
			// Create a link using the selected size.id
			var link = document.createElement("a");
			link.href = "/your-link-base/" + selectedValue;  // Replace with your link base URL
			link.innerText = "Go to Size " + selectedValue;
			
			// Replace the existing content with the new link
			var selectContainer = this.parentElement;
			selectContainer.innerHTML = "";  // Clear the container
			selectContainer.appendChild(link);
		}
	});
	</script> -->
<script>
    $(document).ready(function() {
        const sizeSelect = document.getElementById('sizeSelect');
        const priceDisplay = document.getElementById('priceDisplay');
        const addToCartButton = document.getElementById('addToCart');
        const productId = "{{ product.id }}";

        sizeSelect.addEventListener('change', () => {
            const selectedSize = sizeSelect.value;

            // Make an AJAX request to update the price
            $.ajax({
                url: `/update_price/?product=${productId}&size=${selectedSize}`,
                success: function(data) {
                    priceDisplay.textContent = data.price;
                }
            });
        });

        addToCartButton.addEventListener('addToCart', () => {
			console.log('aaaa')
            const selectedSize = sizeSelect.value;

            // Make an AJAX request to add the product to the cart
            $.ajax({
                type: "POST",
                url: `/add-to-cart/${productId}/`,
                data: {
                    selected_size: selectedSize,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                },
                success: function(response) {
                    console.log("Product added to cart successfully!");
                    // Update the displayed price in the cart (if applicable)
                    const cartPriceDisplay = document.getElementById('cartPriceDisplay');
                    if (cartPriceDisplay) {
                        cartPriceDisplay.textContent = priceDisplay.textContent;
                    }
                    // You can also update the cart count or perform other actions as needed
                },
                error: function(response) {
                    console.log("Error adding product to cart.");
                }
            });
        });
    });
</script> 
<script>
	
	document.addEventListener('DOMContentLoaded', function() {
		var modal = document.getElementById("myModal");
		var addToCartButtons = document.querySelectorAll(".addToCartBtn"); // Select all buttons with class "addToCartBtn"
		var span = document.querySelector(".close");
	
		// Loop through each "Add to Cart" button
		addToCartButtons.forEach(function(btn) {
			btn.onclick = function() {
				// Get the productId from the data attribute of the clicked button
				var productId = btn.getAttribute('data-product-id');
				console.log(productId);
				// Make an AJAX request
				var xhr = new XMLHttpRequest();
				var url = "cartaddjs/" + productId + "/";
				xhr.open('GET', url, true);
                console.log("Constructed URL:", url);
				xhr.onreadystatechange = function() {
					if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
						modal.style.display = "block";
					}
				};
				xhr.send();
			};
		});
	
	
		window.onclick = function(event) {
			if (event.target == modal) {
				modal.style.display = "none";
			}
		};
	});
</script>


	
		
	


{% endblock  %}